{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container">
    <form action="{% url 'place_order' %}" method="POST">
    {% csrf_token %}
    <div class="container-cart">
        <div class="cart-products-checkout">
            <h2>Delivery</h2>
            {{ form.as_p }}
        </div>

        <div class="cart-summary-checkout">
            <h2>Order summary</h2>
            {% for cart_item in cart_items %}
            <div class="cart-item">
                <img src="{{ cart_item.product.product_images.url }}" alt="Product 1" class="cart-image">
                <div class="cart-details">
                    <h3 class="cart-name"><a class="text-dark" style="text-decoration:none" href="{{ cart_item.product.get_url }}">{{ cart_item.product.product_name }}</a></h3>
                    <p class="mt-2">Quantity: {{ cart_item.cart_item_quantity }}</p>
                    <p class="text-muted small">
                        {% if cart_item.variations.all %}
                           {% for item in cart_item.variations.all %}
                              {{ item.variation_category | capfirst }} : {{ item.variation_value | capfirst }} <br>
                           {% endfor %}
                        {% endif %}
                    </p>
                </div>
                <div class="box-price-cart">
                    <p class="cart-price mb-0">$ {{ cart_item.sub_total }}</p>
                    <small class="text-muted">$ {{cart_item.product.product_price}}</small>
                </div>
            </div>
            {% endfor %}
            <button type="submit" name="submit" class="checkout-button">Place Order</button>
        </div>
    </div>
    </form>
</div>

{% endblock content %}
